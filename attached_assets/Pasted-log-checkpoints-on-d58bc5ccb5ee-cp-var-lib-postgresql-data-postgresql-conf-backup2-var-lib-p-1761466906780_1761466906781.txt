log_checkpoints = on
d58bc5ccb5ee:/# cp /var/lib/postgresql/data/postgresql.conf.backup2 /var/lib/postgresql/data/postgresql.conf
d58bc5ccb5ee:/# sed -i '/^shared_buffers/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^effective_cache_size/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^work_mem/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^maintenance_work_mem/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^max_worker_processes/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^max_parallel_workers/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^max_parallel_workers_per_gather/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^random_page_cost/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^effective_io_concurrency/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^wal_buffers/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^max_wal_size/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^min_wal_size/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^checkpoint_completion_target/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^autovacuum_max_workers/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^autovacuum_naptime/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^log_min_duration_statement/d' /var/lib/postgresql/data/postgresql.conf
sed -i '/^log_checkpoints/d' /var/lib/postgresql/data/postgresql.conf
d58bc5ccb5ee:/# cat >> /var/lib/postgresql/data/postgresql.conf << 'CONF'
# ===== OTIMIZAÇÕES VPS 16GB RAM =====
shared_buffers = 4GB
effective_cache_size = 12GB
work_mem = 40MB
maintenance_work_mem = 1600MB
max_worker_processes = 4
max_parallel_workers = 4
max_parallel_workers_per_gather = 2
random_page_cost = 1.1
effective_io_concurrency = 200
wal_buffers = 16MB
max_wal_size = 2GB
min_wal_size = 1GB
checkpoint_completion_target = 0.9
autovacuum_max_workers = 2
autovacuum_naptime = 1min
log_min_duration_statement = 1000
log_checkpoints = on
CONF
d58bc5ccb5ee:/# tail -20 /var/lib/postgresql/data/postgresql.conf

# ===== CONFIGURAÇÕES OTIMIZADAS PARA VPS 16GB RAM =====
# ===== OTIMIZAÇÕES VPS 16GB RAM =====
shared_buffers = 4GB
effective_cache_size = 12GB
work_mem = 40MB
maintenance_work_mem = 1600MB
max_worker_processes = 4
max_parallel_workers = 4
max_parallel_workers_per_gather = 2
random_page_cost = 1.1
effective_io_concurrency = 200
wal_buffers = 16MB
max_wal_size = 2GB
min_wal_size = 1GB
checkpoint_completion_target = 0.9
autovacuum_max_workers = 2
autovacuum_naptime = 1min
log_min_duration_statement = 1000
log_checkpoints = on
d58bc5ccb5ee:/#